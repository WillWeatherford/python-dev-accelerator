<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Pyramid Views, Templates, and Front-end Testing &mdash; Python 401 2.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/pyramid.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Python 401 2.1 documentation" href="../index.html" />
    <link rel="up" title="Tuesday" href="../schedule/week03/tue.html" />
    <link rel="next" title="Wednesday" href="../schedule/week03/wed.html" />
    <link rel="prev" title="Heap" href="heap.html" />
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />

<link rel="stylesheet" href="../_static/custom.css" type="text/css" media="screen" charset="utf-8" />

<!--[if lte IE 6]>
<link rel="stylesheet" href="../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head>
  <body role="document">
<div class="header">
  <div class="logo">
    <a href="../index.html">
      <img class="logo" src="../_static/cf_logo.png" alt="Logo"/>
      <p>Code Fellows</p>
    </a>
  </div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../schedule/week03/wed.html" title="Wednesday"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="heap.html" title="Heap"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Python 401 2.1 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../schedule/week03/tue.html" accesskey="U">Tuesday</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput > div,
div.nbinput div[class^=highlight],
div.nbinput div[class^=highlight] pre,
div.nboutput,
div.nboutput > div,
div.nboutput div[class^=highlight],
div.nboutput div[class^=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput > :first-child pre {
    color: navy;
}

/* output prompt */
div.nboutput > :first-child pre {
    color: darkred;
}

/* all prompts */
div.nbinput > :first-child[class^=highlight],
div.nboutput > :first-child[class^=highlight],
div.nboutput > :first-child {
    min-width: 11ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}

/* input/output area */
div.nbinput > :nth-child(2)[class^=highlight],
div.nboutput > :nth-child(2),
div.nboutput > :nth-child(2)[class^=highlight] {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
}

/* input area */
div.nbinput > :nth-child(2)[class^=highlight] {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput  > :nth-child(2).stderr {
    background: #fdd;
}

/* ANSI colors */
.ansiblack { color: black; }
.ansired { color: darkred; }
.ansigreen { color: darkgreen; }
.ansiyellow { color: #c4a000; }
.ansiblue { color: darkblue; }
.ansipurple { color: darkviolet; }
.ansicyan { color: steelblue; }
/* See https://github.com/jupyter/nbconvert/issues/174 */
.ansigray { color: gray; }  /* nbconvert CSS */
.ansigrey { color: gray; }  /* nbconvert HTML output */

.ansibgblack { background-color: black; }
.ansibgred { background-color: red; }
.ansibggreen { background-color: green; }
.ansibgyellow { background-color: yellow; }
.ansibgblue { background-color: blue; }
.ansibgpurple { background-color: magenta; }
.ansibgcyan { background-color: cyan; }
.ansibggray { background-color: gray; }

.ansibold { font-weight: bold; }
</style>
<div class="section" id="pyramid-views-templates-and-front-end-testing">
<h1>Pyramid Views, Templates, and Front-end Testing<a class="headerlink" href="#pyramid-views-templates-and-front-end-testing" title="Permalink to this headline">¶</a></h1>
<p>Last time, we got started with a Pyramid app with the intention to display learning journal entries online.
Toward this end, we created basic views that read raw HTML files and provided them to the browser as an HTTP response.
That worked, but it&#8217;s a really crappy way to use Pyramid and doesn&#8217;t even begin to take advantage of its capabilities.
Today we&#8217;ll learn about better ways to connect views to the HTML they serve, and how to use templates to display our information.</p>
<div class="section" id="the-mvc-view">
<h2>The MVC View<a class="headerlink" href="#the-mvc-view" title="Permalink to this headline">¶</a></h2>
<p>We return again to the <em>Model-View-Controller</em> pattern.
We&#8217;ve built our <em>controller</em> using Pyramid&#8217;s <strong>view</strong> callables that take <em>HTTP requests</em> as arguments.
We&#8217;ve also created the beginnings of our MVC <em>view</em> using our HTTP files.
Let&#8217;s dig into both of these some more.</p>
</div>
<div class="section" id="presenting-data">
<h2>Presenting Data<a class="headerlink" href="#presenting-data" title="Permalink to this headline">¶</a></h2>
<p>The job of the <em>view</em> in the <em>MVC</em> pattern is to present data in a format that is readable to the user of the system.
There are many ways to present data.
Some are readable by humans (e.g. tables, charts, graphs, HTML pages, text files),
while others are more for machines (e.g. xml files, csv, json).
Which of these formats is the <em>right one</em> depends on your purpose.
What is the purpose of our learning journal?</p>
<div class="section" id="pyramid-renderers-and-view-config">
<h3>Pyramid Renderers and <code class="docutils literal"><span class="pre">view_config</span></code><a class="headerlink" href="#pyramid-renderers-and-view-config" title="Permalink to this headline">¶</a></h3>
<p>In part one of our introduction to Pyramid, we created our first view like so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>

<span class="k">def</span> <span class="nf">home_page</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s2">&quot;This is my first view!&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">includeme</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">home_page</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>By doing so, we conflated the tasks of the <em>MVC controller</em> and the <em>MVC view</em>.
This is simple, and allows us to get started, but it is not the preferred method.
More typically, we allow a <em>view callable</em> to function solely as a controller,
and delegate data presentation to a <em>renderer</em></p>
<p>Renderers in Pyramid come in a variety of types.
There are three <a class="reference external" href="http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/renderers.html">renderers</a> built-in: <code class="docutils literal"><span class="pre">string</span></code>, <code class="docutils literal"><span class="pre">json</span></code>, and <code class="docutils literal"><span class="pre">jsonp</span></code>.
With plugins, like <code class="docutils literal"><span class="pre">pyramid_jinja2</span></code>, we can extend this list by adding renderers that implement popular templating languages.</p>
<p>Pyramid renderers take a Python object (a string, list or dict) object and return it as an HTTP response.
The <code class="docutils literal"><span class="pre">Content-Type</span></code> header of the response is set automatically, depending on the renderer used.</p>
<p>We associate a renderer with a view using configuration.
We can extend the <strong>imperative</strong> configuration we used yesterday with a <code class="docutils literal"><span class="pre">renderer</span></code> argument:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">includeme</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">home_page</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="s1">&#39;string&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>However, that approach is also considered to be a bit awkward.
The problem is that it separates the configuration of a view from the location of the view callable.
This makes it more difficult to quickly understand what each part of your code is doing.</p>
<p>Instead, let&#8217;s use a <strong>declarative</strong> style with the <code class="docutils literal"><span class="pre">&#64;view_config</span></code> decorator:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c1"># views.py</span>
<span class="c1"># ...</span>
<span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>

<span class="c1"># ...</span>
<span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="s1">&#39;string&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">home_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;This was transformed into an HTTP response&quot;</span>

<span class="c1"># ...</span>
</pre></div>
</div>
<p>Finally, since we&#8217;re now connecting our view to our route with this decorator (and we will forever onward),
we&#8217;ll need to refactor our code a bit...</p>
<ul class="simple">
<li>We no longer need to import or use <code class="docutils literal"><span class="pre">Response</span></code> from <code class="docutils literal"><span class="pre">pyramid.response</span></code></li>
<li>We will decorate each of our views with <code class="docutils literal"><span class="pre">view_config</span></code> where the <code class="docutils literal"><span class="pre">renderer</span></code> is <code class="docutils literal"><span class="pre">string</span></code> and <code class="docutils literal"><span class="pre">route_name</span></code> is the appropriate route name for that view</li>
<li>We don&#8217;t need the <code class="docutils literal"><span class="pre">includeme</span></code> function as <code class="docutils literal"><span class="pre">view_config</span></code> and other configuration decorators are found automatically by <code class="docutils literal"><span class="pre">config.scan()</span></code>.</li>
<li>In <code class="docutils literal"><span class="pre">__init__.py</span></code> we don&#8217;t have to use <code class="docutils literal"><span class="pre">config.include('.views')</span></code> for the same reason as above.</li>
</ul>
<p>After refactoring, our code should look <em>something</em> like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c1"># __init__.py</span>
<span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">Configurator</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">global_config</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; This function returns a Pyramid WSGI application.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">include</span><span class="p">(</span><span class="s1">&#39;pyramid_jinja2&#39;</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">include</span><span class="p">(</span><span class="s1">&#39;.routes&#39;</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">scan</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">config</span><span class="o">.</span><span class="n">make_wsgi_app</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c1"># views.py</span>

<span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="s1">&#39;string&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">list_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;Home!&quot;</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;detail&#39;</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="s1">&#39;string&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">detail_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;content&quot;</span> <span class="p">:</span> <span class="s2">&quot;This was transformed into an HTTP response&quot;</span><span class="p">}</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="s1">&#39;string&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">create_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span> <span class="s2">&quot;of&quot;</span><span class="p">,</span> <span class="s2">&quot;values&quot;</span><span class="p">]</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;edit&#39;</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="s1">&#39;string&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">update_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;This is&quot;</span><span class="p">,</span> <span class="s2">&quot;a tuple&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Notice that for each of the above views, <em>anything</em> that was returned was printed to the browser as a string.
We did not have to have it wrapped in an HTTP response object.
Check your browser and verify that the <code class="docutils literal"><span class="pre">Content-Type</span></code> of the response was <code class="docutils literal"><span class="pre">text/plain</span></code>.</p>
<p>As we noted above, we can attach external renderers to our views as well.
We have in fact included one in <code class="docutils literal"><span class="pre">__init__.py</span></code> with the <code class="docutils literal"><span class="pre">pyramid_jinja2</span></code> package. Recall:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c1"># __init__.py</span>
<span class="n">config</span><span class="o">.</span><span class="n">include</span><span class="p">(</span><span class="s1">&#39;pyramid_jinja2&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">pyramid_jinja2</span></code> package supports using the <em>Jinja2</em> template language.
Let&#8217;s learn a bit about how <a class="reference external" href="http://jinja.pocoo.org/docs/templates/">Jinja2 templates</a> work.</p>
</div>
<div class="section" id="jinja2-template-basics">
<h3>Jinja2 Template Basics<a class="headerlink" href="#jinja2-template-basics" title="Permalink to this headline">¶</a></h3>
<p>We&#8217;ll start with the absolute basics.
Fire up an iPython interpreter in your virtual environment and import the <code class="docutils literal"><span class="pre">Template</span></code> class from the <code class="docutils literal"><span class="pre">jinja2</span></code> package:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">(</span>pyramid_lj<span class="o">)</span> bash-3.2$ ipython
...
In <span class="o">[</span>1<span class="o">]</span>: from jinja2 import Template
</pre></div>
</div>
<p>A template is constructed with a simple string:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [2]: </span><span class="n">t1</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&quot;Hello {{ name }}, how are you&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Here, we&#8217;ve typed the string directly, but it is more common to build a template from the contents of a <em>file</em>.</p>
<p>Notice that our string has some odd stuff in it: <code class="docutils literal"><span class="pre">{{</span> <span class="pre">name</span> <span class="pre">}}</span></code>.
This is called a <em>placeholder</em> (it is marked as such by the double curly braces).
When the template is <em>rendered</em> any placeholder in our template is replaced.</p>
<p>Where does the template engine find the values to use in place of the placeholders?
We are responsible for passing them to the template in the form of <em>context</em>.
Context is passed as keyword arguments to the render method of the template.
The names of the provided keyword arguments map onto the names of the placeholders in the template.</p>
<p>We can see this if we call <code class="docutils literal"><span class="pre">t1</span></code>&#8216;s <code class="docutils literal"><span class="pre">render</span></code> method, providing <em>context</em> for <code class="docutils literal"><span class="pre">{{name}}</span></code>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [3]: </span><span class="n">t1</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Freddy&quot;</span><span class="p">)</span>
<span class="gh">Out[3]: </span><span class="go">&#39;Hello Freddy, how are you&#39;</span>

<span class="gp">In [4]: </span><span class="n">t1</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Gloria&quot;</span><span class="p">)</span>
<span class="gh">Out[4]: </span><span class="go">&#39;Hello Gloria, how are you&#39;</span>
</pre></div>
</div>
<p>Note the resemblance to the string formatting we&#8217;ve seen before:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [5]: </span><span class="s2">&quot;This is {owner}&#39;s string&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">owner</span><span class="o">=</span><span class="s2">&quot;Cris&quot;</span><span class="p">)</span> <span class="c1"># &lt;-- this is straight Python, NOT Jinja2</span>
<span class="gh">Out[5]: </span><span class="go">&#39;This is Cris&#39;s string&#39;</span>
</pre></div>
</div>
<p>Dictionaries passed in as part of the <em>context</em> can be addressed with either subscription or dotted notation:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [6]: </span><span class="n">person</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;first_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Frank&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>          <span class="s1">&#39;last_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Herbert&#39;</span><span class="p">}</span>
<span class="gp">In [7]: </span><span class="n">t2</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&quot;{{ person.last_name }}, {{ person[&#39;first_name&#39;] }}&quot;</span><span class="p">)</span>
<span class="gp">In [8]: </span><span class="n">t2</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">person</span><span class="o">=</span><span class="n">person</span><span class="p">)</span>
<span class="gh">Out[8]: </span><span class="go">&#39;Herbert, Frank&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li>Jinja2 will try the <em>correct</em> way first (attr for dotted, item for subscript).</li>
<li>If nothing is found, it will try the opposite.</li>
<li>If still nothing, it will return an <em>undefined</em> object.</li>
</ul>
<p>The exact same is true of objects passed in as part of <em>context</em>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [9]: </span><span class="n">t3</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&quot;{{ obj.first_attr }} + {{ obj[&#39;second_attr&#39;] }} = Fun!&quot;</span><span class="p">)</span>
<span class="gp">In [10]: </span><span class="k">class</span> <span class="nc">Game</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">   ...: </span>    <span class="n">first_attr</span> <span class="o">=</span> <span class="s1">&#39;babies&#39;</span>
<span class="gp">   ...: </span>    <span class="n">second_attr</span> <span class="o">=</span> <span class="s1">&#39;bubbles&#39;</span>
<span class="gp">   ...:</span>
<span class="gp">In [11]: </span><span class="n">bathtime</span> <span class="o">=</span> <span class="n">Game</span><span class="p">()</span>
<span class="gp">In [12]: </span><span class="n">t3</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">bathtime</span><span class="p">)</span>
<span class="gh">Out[12]: </span><span class="go">&#39;babies + bubbles = Fun!&#39;</span>
</pre></div>
</div>
<p>This means your templates can be agnostic as to the nature of the things found in <em>context</em>.</p>
<p>You can apply <a class="reference external" href="http://jinja.pocoo.org/docs/dev/templates/#filters">filters</a> to the data passed in <em>context</em> with the pipe (&#8216;|&#8217;) operator:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [13]: </span><span class="n">t4</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&quot;shouted: {{ phrase|upper }}&quot;</span><span class="p">)</span>
<span class="gp">In [14]: </span><span class="n">t4</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">phrase</span><span class="o">=</span><span class="s2">&quot;this is very important&quot;</span><span class="p">)</span>
<span class="gh">Out[14]: </span><span class="go">&#39;shouted: THIS IS VERY IMPORTANT&#39;</span>
</pre></div>
</div>
<p>You can also chain filters together:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [15]: </span><span class="n">t5</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&quot;confusing: {{ phrase|upper|reverse }}&quot;</span><span class="p">)</span>
<span class="gp">In [16]: </span><span class="n">t5</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">phrase</span><span class="o">=</span><span class="s2">&quot;howdy doody&quot;</span><span class="p">)</span>
<span class="gh">Out[16]: </span><span class="go">&#39;confusing: YDOOD YDWOH&#39;</span>
</pre></div>
</div>
<p>Logical <a class="reference external" href="http://jinja.pocoo.org/docs/dev/templates/#list-of-control-structures">control structures</a> are also available.
They are marked by a curly brace combined with a percent sign (<code class="docutils literal"><span class="pre">{%</span> <span class="pre">control_name</span> <span class="pre">%}</span></code>):</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [17]: </span><span class="n">tmpl</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="gp">   ....: </span><span class="s2">{</span><span class="si">% f</span><span class="s2">or item in list %}{{ item}}, {</span><span class="si">% e</span><span class="s2">ndfor %}</span>
<span class="gp">   ....: </span><span class="s2">&quot;&quot;&quot;</span>
<span class="gp">In [18]: </span><span class="n">t6</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="n">tmpl</span><span class="p">)</span>
<span class="gp">In [19]: </span><span class="n">t6</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="nb">list</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">])</span>
<span class="gh">Out[19]: </span><span class="go">&#39;\na, b, c, d, e, &#39;</span>
</pre></div>
</div>
<p>Any control structure introduced in a template <strong>must</strong> be paired with an explicit closing tag
(<code class="docutils literal"><span class="pre">{%</span> <span class="pre">for</span> <span class="pre">%}</span> <span class="pre">...</span> <span class="pre">{%</span> <span class="pre">endfor</span> <span class="pre">%}</span></code>, <code class="docutils literal"><span class="pre">{%</span> <span class="pre">if</span> <span class="pre">%}</span> <span class="pre">...</span> <span class="pre">{%</span> <span class="pre">elif</span> <span class="pre">%}</span> <span class="pre">...</span> <span class="pre">{%</span> <span class="pre">else</span> <span class="pre">%}</span> <span class="pre">...</span> <span class="pre">{%</span> <span class="pre">endif</span> <span class="pre">%}</span></code>).</p>
<p>Remember, although template tags like <code class="docutils literal"><span class="pre">{%</span> <span class="pre">for</span> <span class="pre">%}</span></code> or <code class="docutils literal"><span class="pre">{%</span> <span class="pre">if</span> <span class="pre">%}</span></code> look a lot like Python, <em>they are not</em>.
The syntax is specific and must be followed correctly.</p>
<p>There are a number of specialized <em>tests</em> available for use with the <code class="docutils literal"><span class="pre">if...elif...else</span></code> control structure:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [20]: </span><span class="n">tmpl</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="gp">   ....: </span><span class="s2">{</span><span class="si">% i</span><span class="s2">f phrase is upper %}</span>
<span class="gp">   ....: </span><span class="s2">  {{ phrase|lower }}</span>
<span class="gp">   ....: </span><span class="s2">{</span><span class="si">% e</span><span class="s2">lif phrase is lower %}</span>
<span class="gp">   ....: </span><span class="s2">  {{ phrase|upper }}</span>
<span class="gp">   ....: </span><span class="s2">{</span><span class="si">% e</span><span class="s2">lse %}{{ phrase }}{</span><span class="si">% e</span><span class="s2">ndif %}&quot;&quot;&quot;</span>
<span class="gp">In [21]: </span><span class="n">t7</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="n">tmpl</span><span class="p">)</span>
<span class="gp">In [22]: </span><span class="n">t7</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">phrase</span><span class="o">=</span><span class="s2">&quot;FOO&quot;</span><span class="p">)</span>
<span class="gh">Out[22]: </span><span class="go">&#39;\n\n  foo\n&#39;</span>
<span class="gp">In [23]: </span><span class="n">t7</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">phrase</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">)</span>
<span class="gh">Out[23]: </span><span class="go">&#39;\n\n  BAR\n&#39;</span>
<span class="gp">In [24]: </span><span class="n">t7</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">phrase</span><span class="o">=</span><span class="s1">&#39;This should print as-is&#39;</span><span class="p">)</span>
<span class="gh">Out[24]: </span><span class="go">&#39;\nThis should print as-is&#39;</span>
</pre></div>
</div>
<p>Basic <a class="reference external" href="http://jinja.pocoo.org/docs/dev/templates/#expressions">Python-like expressions</a> are also supported:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [25]: </span><span class="n">tmpl</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="gp">   ....: </span><span class="s2">{</span><span class="si">% s</span><span class="s2">et sum = 0 %}</span>
<span class="gp">   ....: </span><span class="s2">{</span><span class="si">% f</span><span class="s2">or val in values %}</span>
<span class="gp">   ....: </span><span class="s2">{{ val }}: {{ sum + val }}</span>
<span class="gp">   ....: </span><span class="s2">  {</span><span class="si">% s</span><span class="s2">et sum = sum + val %}</span>
<span class="gp">   ....: </span><span class="s2">{</span><span class="si">% e</span><span class="s2">ndfor %}</span>
<span class="gp">   ....: </span><span class="s2">&quot;&quot;&quot;</span>
<span class="gp">In [26]: </span><span class="n">t8</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="n">tmpl</span><span class="p">)</span>
<span class="gp">In [27]: </span><span class="n">t8</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span>
<span class="gh">Out[27]: </span><span class="go">&#39;\n\n\n1: 1\n  \n\n2: 3\n  \n\n3: 6\n  \n\n4: 10\n</span>
<span class="go">          \n\n5: 15\n  \n\n6: 21\n  \n\n7: 28\n  \n\n8: 36\n</span>
<span class="go">          \n\n9: 45\n  \n\n10: 55\n  \n\n&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="templates-applied">
<h2>Templates Applied<a class="headerlink" href="#templates-applied" title="Permalink to this headline">¶</a></h2>
<p>There&#8217;s more that Jinja2 templates can do, but it is easier to introduce you to that in the context of a working template.
So let&#8217;s make some.</p>
<p>We have a Pyramid <code class="docutils literal"><span class="pre">view</span></code> that&#8217;ll return the content of a single entry.
Let&#8217;s create a template to show it.
In <code class="docutils literal"><span class="pre">learning_journal_basic/templates/</span></code> create a new file <code class="docutils literal"><span class="pre">detail.jinja2</span></code>:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">article</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>LJ - Day 12<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Created <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Aug 23, 2016<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Sample body text.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">article</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>We&#8217;ll start with this <em>static</em> template, without trying placeholders yet.
Notice that the file type is <code class="docutils literal"><span class="pre">.jinja2</span></code>, not <code class="docutils literal"><span class="pre">.html</span></code>.</p>
<p>Wire up our new detail template <em>renderer</em> to the detail view in <code class="docutils literal"><span class="pre">learning_journal_basic/views.py</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c1"># views.py</span>
<span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;detail&#39;</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="s1">&#39;templates/detail.jinja2&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="c1">#...</span>
</pre></div>
</div>
<p>Now we should be able to see some rendered HTML for our journal entry details. Start up your server:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">(</span>pyramid_lj<span class="o">)</span> bash-3.2$ pserve development.ini
Starting server in PID 53587.
serving on http://127.0.0.1:6543
</pre></div>
</div>
<p>Then try viewing an individual journal entry: <a class="reference external" href="http://localhost:6543/journal/1">http://localhost:6543/journal/1</a></p>
<p>The HTML in our Jinja2 template comes up just as we&#8217;ve structured it!
However there&#8217;s a problem.
If we were to continue on like this we&#8217;d still have to create an individual template for <em>every</em> journal entry.
If we just wanted to write static HTML this way, why would we ever use a template?</p>
<p>Jinja2 templates are rendered with a <em>context</em>.
A Pyramid <em>view</em> returns a dictionary, which is passed to the renderer as that <em>context</em>.
This means we can access values we return from our <em>view</em> in the <em>renderer</em> using the names we assigned to them.</p>
<p>Just like we did in the command line, we can use placeholders.
We&#8217;ll feed data to those placeholders through the <code class="docutils literal"><span class="pre">return</span></code> statement of our <code class="docutils literal"><span class="pre">detail_view</span></code>:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre># templates/detail.jinja2
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">article</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">title</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Created <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">creation_date</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">body</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">article</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="highlight-html+jinja"><div class="highlight"><pre># views.py
def detail_view(request):
    return {
        &quot;title&quot;: &quot;LJ - Day 12&quot;,
        &quot;creation_date&quot;: &quot;Aug 23, 2016&quot;,
        &quot;body&quot;: &quot;Sample body text.&quot;
    }
</pre></div>
</div>
<p>There are some other pieces of data that Pyramid adds to the <em>context</em> you return from your view.
One of these is the <em>request</em> object.
It gives us access to information that the framework provides automatically.</p>
<p>The Pyramid <code class="docutils literal"><span class="pre">request</span></code> has a method called <code class="docutils literal"><span class="pre">route_url</span></code>.
The job of this method is to return a URL corresponding to some route in your configured application.
This allows you to include URLs in your template without needing to know exactly what they will be.
The process is called <em>reversing</em>, since it&#8217;s a bit like a reverse phone book lookup.</p>
<p>The request also provides an attribute called <code class="docutils literal"><span class="pre">url</span></code> that will return the URL for the current page.
We can use these features to begin creating connections from our template to other views in our application.</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">article</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">request.url</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">title</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span> # this is new
            <span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Created <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">creation_date</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">body</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">article</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">footer</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">request.route_url</span><span class="o">(</span><span class="s1">&#39;home&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span>Home<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">footer</span><span class="p">&gt;</span> # this is also new
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Let&#8217;s now create a template such that our index shows a list of journal entries.
We&#8217;ll show only the title and the date of creation.
In <code class="docutils literal"><span class="pre">learning_journal_basic/templates/</span></code> create a new file <code class="docutils literal"><span class="pre">list.jinja2</span></code>:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Home Page<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
        <span class="cp">{%</span> <span class="k">if</span> <span class="nv">entries</span> <span class="cp">%}</span>
            <span class="cp">{%</span> <span class="k">for</span> <span class="nv">entry</span> <span class="k">in</span> <span class="nv">entries</span> <span class="cp">%}</span>
                <span class="p">&lt;</span><span class="nt">article</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">request.route_url</span><span class="o">(</span><span class="s1">&#39;detail&#39;</span><span class="o">,</span> <span class="nv">id</span><span class="o">=</span><span class="nv">entry.id</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">entry.title</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>
                    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Created <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">entry.creation_date</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">article</span><span class="p">&gt;</span>
            <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
        <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>This journal is empty<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
        <span class="p">&lt;</span><span class="nt">footer</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">request.route_url</span><span class="o">(</span><span class="s1">&#39;home&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span>Home<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">footer</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>It&#8217;s worth taking a look at a few specifics of this template.</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">for</span> <span class="nv">entry</span> <span class="k">in</span> <span class="nv">entries</span> <span class="cp">%}</span>
... # stuff here
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Pyramid has <em>control structures</em> just like Python.
Remember though that every <code class="docutils literal"><span class="pre">for</span></code> loop and <code class="docutils literal"><span class="pre">if</span></code> block in Pyramid must end with an <code class="docutils literal"><span class="pre">endfor</span></code>/<code class="docutils literal"><span class="pre">endif</span></code>.
As with looping in Python, you can iterate over values that are iterable and render each in turn.</p>
<p>Let&#8217;s look at another aspect of the same template.</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">request.route_url</span><span class="o">(</span><span class="s1">&#39;detail&#39;</span><span class="o">,</span> <span class="nv">id</span><span class="o">=</span><span class="nv">entry.id</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">entry.title</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Before we saw <code class="docutils literal"><span class="pre">request.route_url</span></code> used to...request the url of the route named <code class="docutils literal"><span class="pre">home</span></code>.
Now we&#8217;re seeing it used to get the url for the <code class="docutils literal"><span class="pre">detail</span></code> route.
Note that in <code class="docutils literal"><span class="pre">routes.py</span></code> that the <code class="docutils literal"><span class="pre">detail</span></code> route requires a value to serve as the <code class="docutils literal"><span class="pre">id</span></code>.
Up to now we&#8217;ve been bypassing this by just providing a number that would fit the bill.
In this case, we have to provide any keywords we want to reference in the url as an argument to <code class="docutils literal"><span class="pre">request.route_url</span></code>.</p>
<p>Finally, you&#8217;ll need to connect this new renderer to your listing view.
Since we need to display data on the page, we have to feed it data to be displayed.
Let&#8217;s alter views.py:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c1"># ...</span>
<span class="n">ENTRIES</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;LJ - Day 10&quot;</span><span class="p">,</span> <span class="s2">&quot;creation_date&quot;</span><span class="p">:</span> <span class="s2">&quot;Aug 19, 2016&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="s2">&quot;Sample body text.&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;LJ - Day 11&quot;</span><span class="p">,</span> <span class="s2">&quot;creation_date&quot;</span><span class="p">:</span> <span class="s2">&quot;Aug 22, 2016&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="s2">&quot;Sample body text.&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;LJ - Day 12&quot;</span><span class="p">,</span> <span class="s2">&quot;creation_date&quot;</span><span class="p">:</span> <span class="s2">&quot;Aug 23, 2016&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="s2">&quot;Sample body text.&quot;</span><span class="p">},</span>
<span class="p">]</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="s1">&#39;templates/list.jinja2&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">list_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;entries&quot;</span><span class="p">:</span> <span class="n">ENTRIES</span><span class="p">}</span>

<span class="c1">#...</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">ENTRIES</span></code> here is a rare global variable.
For the time being, we will use it as a substitute for a more robust data source.
You&#8217;re going to want to use this for your <code class="docutils literal"><span class="pre">detail</span></code> view tonight.
When we discuss models tomorrow, we&#8217;ll dispose of this entirely.</p>
<p>We can now see our list page in all its glory. Let&#8217;s try starting the server:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">(</span>pyramid_lj<span class="o">)</span> bash-3.2$ pserve development.ini
Starting server in PID 53587.
serving on http://127.0.0.1:6543
</pre></div>
</div>
<p>View the home page of your journal at <a class="reference external" href="http://localhost:6543/">http://localhost:6543/</a>.
Click on the link to an entry, and it should route you to the detail view.</p>
<p>These views are reasonable, if quite plain.
There&#8217;s also code between them that&#8217;s repeated <strong>heavily</strong>, and we want to do our best to keep code DRY.
Let&#8217;s put our templates into something that looks more like a website.</p>
<div class="section" id="template-inheritance">
<h3>Template Inheritance<a class="headerlink" href="#template-inheritance" title="Permalink to this headline">¶</a></h3>
<p>Jinja2 allows you to combine templates using something called <a class="reference external" href="http://jinja.pocoo.org/docs/dev/templates/#template-inheritance">template inheritance</a>.
You can create a basic page structure, and then <em>inherit</em> that structure in other templates.</p>
<p>Let&#8217;s make a template for the basic outer structure of our pages.
The following code will serve as our page template, and will go into a file called <code class="docutils literal"><span class="pre">layout.jinja2</span></code>.
Save that file to your <code class="docutils literal"><span class="pre">templates</span></code> directory.
Here&#8217;s the code:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Python Learning Journal<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
        <span class="c">&lt;!--[if lt IE 9]&gt;&lt;script src=&quot;http://html5shiv.googlecode.com/svn/trunk/html5.js&quot;&gt;&lt;/script&gt;&lt;![endif]--&gt;</span>
    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">header</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">nav</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">request.route_url</span><span class="o">(</span><span class="s1">&#39;home&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span>Home<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">main</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>My Python Journal<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">section</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;content&quot;</span><span class="p">&gt;</span>
        <span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
    <span class="p">&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">footer</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Created in the Code Fellows 401 Python Program<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">footer</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>The important part here is the <code class="docutils literal"><span class="pre">{%</span> <span class="pre">block</span> <span class="pre">body</span> <span class="pre">%}...{%</span> <span class="pre">endblock</span> <span class="pre">%}</span></code> expression.
This is a template <strong>block</strong> and it is a kind of placeholder.
Other templates can inherit from this one, and fill that block with additional HTML.</p>
<p>Let&#8217;s update our <code class="docutils literal"><span class="pre">detail</span></code> and <code class="docutils literal"><span class="pre">list</span></code> templates:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;layout.jinja2&quot;</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}</span>
<span class="c">&lt;!-- the meat for each page goes here --&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Start the server so we can see the result.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">(</span>pyramid_lj<span class="o">)</span> bash-3.2$ pserve development.ini
Starting server in PID 53587.
serving on http://127.0.0.1:6543
</pre></div>
</div>
<p>Start at the home page, click on an entry, and it should still work.
Now, you&#8217;ve shared page structure that is in both.</p>
</div>
<div class="section" id="static-assets">
<h3>Static Assets<a class="headerlink" href="#static-assets" title="Permalink to this headline">¶</a></h3>
<p>Although we have a shared structure, it isn&#8217;t particularly nice to look at.
Aspects of how a website looks are controlled by CSS (<em>Cascading Style Sheets</em>).
Stylesheets are one of what we generally speak of as <em>static assets</em>.
Other static assets include <em>images</em> that are part of the site&#8217;s design (logos, button images, etc) and <em>JavaScript</em> files that add client-side dynamic behavior.</p>
<p>Serving static assets in Pyramid requires adding a <em>static view</em> to configuration.
Luckily, it&#8217;s a simple addition for us to get and serve these assets.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c1"># in learning_journal_basic/__init__.py</span>
<span class="c1"># ...</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">global_config</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; This function returns a Pyramid WSGI application.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">include</span><span class="p">(</span><span class="s1">&#39;pyramid_jinja2&#39;</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">include</span><span class="p">(</span><span class="s1">&#39;.routes&#39;</span><span class="p">)</span>
    <span class="c1"># add this next line</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_static_view</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;learning_journal_basic:static&#39;</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">scan</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">config</span><span class="o">.</span><span class="n">make_wsgi_app</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li>The first argument we have provided to <code class="docutils literal"><span class="pre">add_static_view</span></code> is a name that must appear in the path of URLs requesting assets.</li>
<li>The second argument is a <em>path</em> that is relative to the package being configured.
Assets referenced by the <em>name</em> in a URL will be searched for in the location defined by the <em>path</em>.</li>
<li>Additional keyword arguments control other aspects of how the view works.</li>
</ul>
<p>Once you have a static view configured, you can use assets in that location in templates.
The <em>request</em> object in Pyramid also provides a <code class="docutils literal"><span class="pre">static_path</span></code> method that will render an appropriate asset path for us.</p>
<p>Add the following to your <code class="docutils literal"><span class="pre">layout.jinja2</span></code> template:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  # stuff that was here before
  <span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">request.static_path</span><span class="o">(</span><span class="s1">&#39;learning_journal_basic:static/style.css&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
# everything else
</pre></div>
</div>
<p>The <strong>one required argument</strong> to <code class="docutils literal"><span class="pre">request.static_path</span></code> is a <em>path</em> to an asset.
Note that because any package <em>might</em> define a static view with the directory name <code class="docutils literal"><span class="pre">static</span></code>, we have to specify which package we want to look in.
That&#8217;s why we have <code class="docutils literal"><span class="pre">learning_journal_basic:static/style.css</span></code> in our call.</p>
<p>Create a very basic style for your learning journal and add it to <code class="docutils literal"><span class="pre">learning_journal_basic/static</span></code>.
Then, restart your web server and see what a difference a little style makes.</p>
</div>
</div>
<div class="section" id="testing-your-pyramid-app">
<h2>Testing Your Pyramid App<a class="headerlink" href="#testing-your-pyramid-app" title="Permalink to this headline">¶</a></h2>
<p>Thus far we have written tons of code for handling HTTP routing and filling templates with data.
But we haven&#8217;t yet written any tests of our own to make sure that things work the way that we need them to work.
We can fortunately do this with a combination of Pyramid&#8217;s own <code class="docutils literal"><span class="pre">testing</span></code> module
(<a class="reference external" href="http://docs.pylonsproject.org/projects/pyramid/en/latest/api/testing.html#module-pyramid.testing">Documentation</a>),
as well as the <code class="docutils literal"><span class="pre">unittest</span></code> package from the Python standard library (<a class="reference external" href="https://docs.python.org/3/library/unittest.html#module-unittest">Documentation</a>).
When it comes to testing your Pyramid app, you need to not only do unit tests for individual pieces of functionality.
You need to test for how things perform when in practice.
For example, if your app sends an email, you need to check that the email is actually sent.</p>
<div class="section" id="setting-up-a-test-for-a-view">
<h3>Setting Up a Test for a View<a class="headerlink" href="#setting-up-a-test-for-a-view" title="Permalink to this headline">¶</a></h3>
<p>Our scaffold provided for us a <code class="docutils literal"><span class="pre">tests.py</span></code> file. Let&#8217;s inspect it.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c1"># tests.py</span>
<span class="kn">import</span> <span class="nn">unittest</span>

<span class="kn">from</span> <span class="nn">pyramid</span> <span class="kn">import</span> <span class="n">testing</span>


<span class="k">class</span> <span class="nc">ViewTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">testing</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">testing</span><span class="o">.</span><span class="n">tearDown</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">test_my_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">.views</span> <span class="kn">import</span> <span class="n">my_view</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">testing</span><span class="o">.</span><span class="n">DummyRequest</span><span class="p">()</span>
        <span class="n">info</span> <span class="o">=</span> <span class="n">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;project&#39;</span><span class="p">],</span> <span class="s1">&#39;learning_journal_basic&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">FunctionalTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">learning_journal_basic</span> <span class="kn">import</span> <span class="n">main</span>
        <span class="n">app</span> <span class="o">=</span> <span class="n">main</span><span class="p">({})</span>
        <span class="kn">from</span> <span class="nn">webtest</span> <span class="kn">import</span> <span class="n">TestApp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">testapp</span> <span class="o">=</span> <span class="n">TestApp</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_root</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">testapp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">b</span><span class="s1">&#39;Pyramid&#39;</span> <span class="ow">in</span> <span class="n">res</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
</pre></div>
</div>
<p>We use the <code class="docutils literal"><span class="pre">unittest</span></code> module, which is part of the Python standard library.</p>
<p>The <code class="docutils literal"><span class="pre">unittest</span></code> module provides a <code class="docutils literal"><span class="pre">TestCase</span></code> object that we inherit from and modify.
When we inherit from <code class="docutils literal"><span class="pre">TestCase</span></code>, we get access to a ton of <code class="docutils literal"><span class="pre">assert*</span></code> methods, such as the <code class="docutils literal"><span class="pre">assertEqual</span></code> and <code class="docutils literal"><span class="pre">assertTrue</span></code> seen here.
We also get functionality for setting up a testing environment (<code class="docutils literal"><span class="pre">setUp</span></code>) and tearing it down (<code class="docutils literal"><span class="pre">tearDown</span></code>).
This is not Pyramid-specific, but available in any project where we use <code class="docutils literal"><span class="pre">unittest</span></code>.</p>
<p>As part of the setup, we have pyramid&#8217;s own <code class="docutils literal"><span class="pre">testing</span></code> module.
This module provides tools to set up the configuration we need for our app.
It also gives access to the <code class="docutils literal"><span class="pre">request</span></code> and <code class="docutils literal"><span class="pre">response</span></code> objects that we need to test our views.
Recall that our views must be called with a <code class="docutils literal"><span class="pre">request</span></code> as an argument.
Depending on what work your views must do, this can be any Python object, even a simple string or dict.
But if you require something with a bit more resemblance to a real request, you can use <code class="docutils literal"><span class="pre">testing.DummyRequest</span></code>.</p>
<p>Let&#8217;s comment out the <code class="docutils literal"><span class="pre">FunctionalTests</span></code> TestCase class for now (I&#8217;m removing it entirely).
For the moment we&#8217;ll just focus on <code class="docutils literal"><span class="pre">ViewTests</span></code>.
These will be unit tests for our views.
Let&#8217;s also replace <code class="docutils literal"><span class="pre">my_view</span></code> with <code class="docutils literal"><span class="pre">detail_view</span></code>.
Finally, recall that our <code class="docutils literal"><span class="pre">detail_view</span></code> returns a dictionary, with the &#8220;title&#8221;, &#8220;creation_date&#8221;, and &#8220;body&#8221; of a sample learning journal entry.
Let&#8217;s make our test reflect that, checking that &#8220;title&#8221; is in the value returned by our <code class="docutils literal"><span class="pre">detail_view</span></code>.
For now, we&#8217;ll be working with this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c1"># tests.py</span>
<span class="kn">import</span> <span class="nn">unittest</span>

<span class="kn">from</span> <span class="nn">pyramid</span> <span class="kn">import</span> <span class="n">testing</span>


<span class="k">class</span> <span class="nc">ViewTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">testing</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">testing</span><span class="o">.</span><span class="n">tearDown</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">test_detail_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">.views</span> <span class="kn">import</span> <span class="n">detail_view</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">testing</span><span class="o">.</span><span class="n">DummyRequest</span><span class="p">()</span>
        <span class="n">info</span> <span class="o">=</span> <span class="n">detail_view</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="running-pyramid-tests">
<h3>Running Pyramid Tests<a class="headerlink" href="#running-pyramid-tests" title="Permalink to this headline">¶</a></h3>
<p>To run this test we have to first install all the things we need for testing.
We defined those in our <code class="docutils literal"><span class="pre">setup.py</span></code> so just navigate to the project root and install like so:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">(</span>pyramid_lj<span class="o">)</span> bash-3.2$ pip install -e <span class="s2">&quot;.[testing]&quot;</span>
</pre></div>
</div>
<p>In between the quotes we have <code class="docutils literal"><span class="pre">.[testing]</span></code> because we want to install everything in the current directory (the <code class="docutils literal"><span class="pre">.</span></code>), but we also want the extra packages that we specified for testing.
If you have other extra packages you want for some other reason, you install them in this fashion.</p>
<p>Now that all is installed, run our test!</p>
<div class="highlight-bash"><div class="highlight"><pre>py.test learning_journal_basic/tests.py -q
</pre></div>
</div>
<p>We&#8217;ve designed this one test to pass, so we should get a statement saying it passes.
Spectacular.
But we want to test across versions of Python, so we need to incorporate <code class="docutils literal"><span class="pre">tox</span></code>.
Recall that when we first set up our app via the scaffold, we added <code class="docutils literal"><span class="pre">tox</span></code> into <code class="docutils literal"><span class="pre">tests_require</span></code>.
When we pip-installed <code class="docutils literal"><span class="pre">testing</span></code> above, tox was installed along with everything else.
Now we just have to construct our <code class="docutils literal"><span class="pre">tox.ini</span></code> configuration file so that we can run tox.
Let&#8217;s add a little bit more to our tox file than we usually do.
We don&#8217;t want to just run our tests across versions, we ultimately want to make sure that our app is well-tested across everything we&#8217;ve written.
We want to add coverage. So, our tox file should look like the following:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">[</span>tox<span class="o">]</span>
<span class="nv">envlist</span> <span class="o">=</span> py27, py35

<span class="o">[</span>testenv<span class="o">]</span>
<span class="nv">commands</span> <span class="o">=</span> py.test --cov<span class="o">=</span>learning_journal_basic learning_journal_basic/tests.py -q
<span class="nv">deps</span> <span class="o">=</span>
    pytest
    pytest-cov
    webtest
</pre></div>
</div>
<p>Now we run tox as we always have and ensure that our test passes across Python 2.7 and 3.5.
On top of that, we get a report of the coverage of our tests in the console.</p>
<div class="highlight-bash"><div class="highlight"><pre>---------- coverage: platform darwin, python 3.5.1-final-0 -----------
Name                           Stmts   Miss  Cover
--------------------------------------------------
learning_journal_basic/__init__.py       <span class="m">7</span>      <span class="m">5</span>    29%
learning_journal_basic/routes.py         <span class="m">6</span>      <span class="m">6</span>     0%
learning_journal_basic/views.py         <span class="m">10</span>      <span class="m">3</span>    70%
--------------------------------------------------
TOTAL                             <span class="m">23</span>     <span class="m">14</span>    39%

<span class="m">1</span> passed in 1.48 seconds
</pre></div>
</div>
<p>This seems trivial now because in this particular moment we&#8217;re just testing that the view is returning the data that we put into it in the first place.
That&#8217;s OK, even trivial tests are still evidence that your code works.
Tomorrow when we talk about data models and hook those up to our views, testing our views will involve several more bits.</p>
</div>
<div class="section" id="enter-functional-tests">
<h3>Enter Functional Tests<a class="headerlink" href="#enter-functional-tests" title="Permalink to this headline">¶</a></h3>
<p>As the name implies, <a class="reference external" href="http://docs.pylonsproject.org/projects/pyramid/en/latest/quick_tutorial/functional_testing.html">functional tests</a> verify that various components of our app function together as they should.
They are an important complement to unit tests, which ensure that each individual piece does the job it is designed to do.
We&#8217;ll use functional tests to &#8220;look&#8221; at our front-end and make sure that what&#8217;s being displayed is what we expect.
To set up our functional tests we again inherit from the <code class="docutils literal"><span class="pre">unittest.TestCase</span></code> object.
We then set up a &#8220;working&#8221; version of our app and use HTTP methods on our routes.
As an example (expanded from what was provided by the scaffold):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">FunctionalTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">learning_journal_basic</span> <span class="kn">import</span> <span class="n">main</span>
        <span class="n">app</span> <span class="o">=</span> <span class="n">main</span><span class="p">({})</span>
        <span class="kn">from</span> <span class="nn">webtest</span> <span class="kn">import</span> <span class="n">TestApp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">testapp</span> <span class="o">=</span> <span class="n">TestApp</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_layout_root</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Tests that our layout template is present in the rendered root&quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">testapp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">b</span><span class="s1">&#39;Created in the Code Fellows 401 Python Program&#39;</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_root_contents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Tests that the contents of the root page contains &lt;article&gt;&quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">testapp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">b</span><span class="s1">&#39;&lt;article&gt;&#39;</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
</pre></div>
</div>
<p>Here, we set up a new WSGI app instance by providing our <code class="docutils literal"><span class="pre">main</span></code> function, which is already taking our base global configuration, with an empty dict for settings.
The <code class="docutils literal"><span class="pre">TestApp</span></code>  class from the <code class="docutils literal"><span class="pre">WebTest</span></code> package wraps that app to provide some additional functionality, such as the ability to send <code class="docutils literal"><span class="pre">GET</span></code> requests to a given route.
<code class="docutils literal"><span class="pre">WebTest</span></code> is a great app for testing functionality with respect to real HTTP requests, but it can do so much more (even check for cookies!).
<a class="reference external" href="http://webtest.pythonpaste.org/en/latest/api.html#webtest.app.TestApp">Read the documentation</a> for more details about how <code class="docutils literal"><span class="pre">WebTest</span></code> can help you write robust tests for your web app.</p>
<p>This is great and all, however it seems somewhat silly to test for HTML elements and content using byte strings.
It would be great if a package existed that specialized in collecting and picking apart the DOM.</p>
</div>
<div class="section" id="the-beautifulsoup-interlude">
<h3>The BeautifulSoup Interlude<a class="headerlink" href="#the-beautifulsoup-interlude" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/">Beautiful Soup</a> is a Python package for reading and working with HTML as if you were traversing the DOM.
Luckily for us, WebTest installed BeautifulSoup for us when it was itself installed.
<code class="docutils literal"><span class="pre">pip</span> <span class="pre">freeze</span></code> for evidence of this (and other packages you may not know you had access to).
Let&#8217;s fire up <code class="docutils literal"><span class="pre">pshell</span></code> and use it a little.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1]: </span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
</pre></div>
</div>
<p>The package is called <code class="docutils literal"><span class="pre">bs4</span></code>, and BeautifulSoup is an object that we use to wrap HTML so that we can parse it apart.
Let&#8217;s give it some of the HTML that we wrote for our mockups before we knew about the joys of templates.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [2]: </span><span class="n">some_html</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;learning_journal_basic/templates/sample.html&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">In [3]: </span><span class="k">print</span><span class="p">(</span><span class="n">some_html</span><span class="p">)</span>
<span class="go">&lt;html&gt;</span>
<span class="go">    &lt;head&gt;</span>
<span class="go">        &lt;link rel=&quot;stylesheet&quot; href=&quot;static/style.css&quot; type=&quot;text/css&quot; /&gt;</span>
<span class="go">    &lt;/head&gt;</span>
<span class="go">    &lt;body&gt;</span>
<span class="go">        &lt;h1&gt;This is styled HTML&lt;/h1&gt;</span>
<span class="go">        &lt;ul&gt;</span>
<span class="go">            &lt;li&gt;One&lt;/li&gt;</span>
<span class="go">            &lt;li&gt;Two&lt;/li&gt;</span>
<span class="go">            &lt;li&gt;Three&lt;/li&gt;</span>
<span class="go">        &lt;/ul&gt;</span>
<span class="go">    &lt;/body&gt;</span>
<span class="go">&lt;/html&gt;</span>
</pre></div>
</div>
<p>In order to actually interact with the HTML à la DOM traversal, we first parse our HTML into a <code class="docutils literal"><span class="pre">BeautifulSoup</span></code> instance.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [4]: </span><span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">some_html</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If we don&#8217;t specify the parser, <code class="docutils literal"><span class="pre">BeautifulSoup</span></code> uses the best-available parser, and will tell you so with a nice verbose warning.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [5]: </span><span class="n">tmp_soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">some_html</span><span class="p">)</span>
<span class="go">/Users/Nick/Documents/codefellows/courses/code401_python/pyramid_lj/lib/python3.5/site-packages/bs4/__init__.py:166:</span>
<span class="go">  UserWarning: No parser was explicitly specified, so I&#39;m using the best available HTML parser for this system (&quot;html.parser&quot;).</span>
<span class="go">  This usually isn&#39;t a problem, but if you run this code on another system, or in a different virtual environment,</span>
<span class="go">  it may use a different parser and behave differently.</span>
</pre></div>
</div>
<p>To get rid of this warning, change this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">BeautifulSoup</span><span class="p">(</span><span class="o">&lt;</span><span class="n">your</span> <span class="n">markup</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>to this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">BeautifulSoup</span><span class="p">(</span><span class="o">&lt;</span><span class="n">your</span> <span class="n">markup</span><span class="o">&gt;</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>So, be sure to specify your parser.
There are other, better parsers that you can install.
Check the docs for more info.</p>
<p>We&#8217;ve now made our <code class="docutils literal"><span class="pre">soup</span></code> object and it comes packed with some useful methods and attributes.
One of these is <code class="docutils literal"><span class="pre">soup.findAll('html_element')</span></code>.
When given the appropriate HTML element, like say <code class="docutils literal"><span class="pre">'li'</span></code>, it&#8217;ll find every <code class="docutils literal"><span class="pre">li</span></code> element and return it to you in a <code class="docutils literal"><span class="pre">list</span></code>-like object.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [6]: </span><span class="n">soup</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s2">&quot;li&quot;</span><span class="p">)</span>
<span class="gh">Out[6]: </span><span class="go">[&lt;li&gt;One&lt;/li&gt;, &lt;li&gt;Two&lt;/li&gt;, &lt;li&gt;Three&lt;/li&gt;]</span>

<span class="gp">In [7]: </span><span class="nb">type</span><span class="p">(</span><span class="n">soup</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s2">&quot;li&quot;</span><span class="p">))</span>
<span class="gh">Out[7]: </span><span class="go">bs4.element.ResultSet</span>

<span class="gp">In [8]: </span><span class="n">these_results</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s2">&quot;li&quot;</span><span class="p">)</span>
<span class="gp">In [9]: </span><span class="nb">len</span><span class="p">(</span><span class="n">these_results</span><span class="p">)</span>
<span class="gh">Out[9]: </span><span class="go">3</span>
</pre></div>
</div>
<p>You can also inspect individual DOM elements.
For example, I may want to check what&#8217;s actually contained within the text of my <code class="docutils literal"><span class="pre">&lt;h1&gt;</span></code> tag.
It&#8217;s simple with <code class="docutils literal"><span class="pre">BeautifulSoup</span></code>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [10]: </span><span class="n">h1</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;h1&quot;</span><span class="p">)</span>
<span class="gp">In [11]: </span><span class="n">h1</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span>
<span class="gh">Out[11]: </span><span class="go">&#39;This is styled HTML&#39;</span>
</pre></div>
</div>
<p>You don&#8217;t just have to inspect the body of the document either.
You can look at anything that was a part of that HTML document.
For example, I may want to look into the <code class="docutils literal"><span class="pre">link</span></code> tag at the top.
With <code class="docutils literal"><span class="pre">BeautifulSoup</span></code> I can look at the individual attributes that comprise it.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [12]: </span><span class="n">style</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;link&quot;</span><span class="p">)</span>
<span class="gp">In [13]: </span><span class="k">print</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
<span class="go">&lt;link href=&quot;static/style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;/&gt;</span>

<span class="gp">In [14]: </span><span class="n">style</span><span class="o">.</span><span class="n">attrs</span>
<span class="gh">Out[14]: </span><span class="go">{&#39;href&#39;: &#39;static/style.css&#39;, &#39;rel&#39;: [&#39;stylesheet&#39;], &#39;type&#39;: &#39;text/css&#39;}</span>
</pre></div>
</div>
<p>Of course this is only a cursory look, but <code class="docutils literal"><span class="pre">BeautifulSoup</span></code> goes deep and wide, and is entirely worth dipping into.
We&#8217;ll spend a bit more time with it later in class, but this will be enough for now.
Even though we&#8217;ve only scratched the surface of <code class="docutils literal"><span class="pre">BeautifulSoup</span></code>, we can use what we&#8217;ve seen thus far to more thoroughly test our fledgling app.</p>
</div>
<div class="section" id="return-of-the-functional-test">
<h3>Return of the Functional Test<a class="headerlink" href="#return-of-the-functional-test" title="Permalink to this headline">¶</a></h3>
<p>Recall our functional test, specifically the one that renders the home page.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">test_root_contents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests that the contents of the root page contains &lt;article&gt;&quot;&quot;&quot;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">testapp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">b</span><span class="s1">&#39;&lt;article&gt;&#39;</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
</pre></div>
</div>
<p>Here, we are asserting that there is an <code class="docutils literal"><span class="pre">article</span></code> tag in our html somewhere.
But this page is supposed to put up an <code class="docutils literal"><span class="pre">&lt;article&gt;</span></code> tag for every given journal entry.
We should make sure that there are as many <code class="docutils literal"><span class="pre">article</span></code> tags on the page as there are journal entries.
<code class="docutils literal"><span class="pre">BeautifulSoup</span></code> makes that simple.</p>
<p>Remember that <code class="docutils literal"><span class="pre">response.body</span></code> above is a bytestring that is the rendered html of our page.
We could pass that string to <code class="docutils literal"><span class="pre">BeautifulSoup</span></code> to be parsed if we so desired.
But we don&#8217;t actually need to.
<code class="docutils literal"><span class="pre">WebTest</span></code> has already done this for us.
Our <code class="docutils literal"><span class="pre">response</span></code> has an <code class="docutils literal"><span class="pre">html</span></code> attribute that is a parsed <code class="docutils literal"><span class="pre">BeautifulSoup</span></code> object:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">test_root_contents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests that the contents of the root page contains as many &lt;article&gt; tags as journal entries&quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">.views</span> <span class="kn">import</span> <span class="n">ENTRIES</span>
    <span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span> <span class="k">as</span> <span class="n">Soup</span>

    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">testapp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">html</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ENTRIES</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s2">&quot;article&quot;</span><span class="p">)))</span>
</pre></div>
</div>
<p>That&#8217;s our new functional test for the home page. Notice that instead of simply testing for the existence of any article tag,
it tests specifically that the number on the page matches the number of journal entries.
This is the type of test you want, and you can keep the general form of this one the same when we incorporate data models.
Now, run <code class="docutils literal"><span class="pre">tox</span></code> and look at that sweet, sweet coverage:</p>
<div class="highlight-bash"><div class="highlight"><pre>---------- coverage: platform darwin, python 3.5.1-final-0 -----------
Name                                             Stmts   Miss  Cover
--------------------------------------------------------------------
learning_journal_basic_basic/__init__.py                   <span class="m">7</span>      <span class="m">0</span>   100%
learning_journal_basic_basic/routes.py                     <span class="m">6</span>      <span class="m">0</span>   100%
learning_journal_basic_basic/views.py                     <span class="m">10</span>      <span class="m">2</span>    80%
--------------------------------------------------------------------
TOTAL                                               <span class="m">23</span>      <span class="m">2</span>    91%

<span class="m">3</span> passed in 1.71 seconds
</pre></div>
</div>
<p>Woo!</p>
</div>
</div>
<div class="section" id="recap">
<h2>Recap<a class="headerlink" href="#recap" title="Permalink to this headline">¶</a></h2>
<p>Today&#8217;s work involved a lot of refactoring, switching to Jinja2 templates, and finally dipping our feet into testing.
Specifically, we used Pyramid&#8217;s built-in <code class="docutils literal"><span class="pre">view_config</span></code> decorator to wire our views to the appropriate renderers, removing the need to manually include views and connect routes to those views.</p>
<p>We then of course made the appropriate renderers using Jinja2 templates.
Within those templates, we used placeholders with Jinja2 syntax to wire the data we wanted into the appropriate places without having to manually include them.
We also saw how we could even make our front-end DRY by using template inheritance, creating a master <code class="docutils literal"><span class="pre">layout.jinja2</span></code> template that wrapped each page as needed.</p>
<p>Finally, we saw how to write unit tests for individual views, providing our view callable with a dummy HTTP request and inspecting the data that resulted from that view being called.
In this process, we saw how we could use Pyramid&#8217;s own <code class="docutils literal"><span class="pre">testing</span></code> module to set up a dummy app and send requests without having to access the browser.
We then stepped into functional tests, seeing how we could validate our front-end after the data has been passed and the page has been rendered.
Lastly, we saw how we could use <code class="docutils literal"><span class="pre">BeautifulSoup</span></code> to make our front-end tests more robust, piecing apart the rendered HTML itself and ensuring that the contents of our page match our expectations at a functional level.</p>
<p>Tonight you will use these to update your learning journal app with sensible DRY templates and connections between views and routes using the declarative style of <code class="docutils literal"><span class="pre">view_config</span></code>.
You will then write comprehensive tests for your individual views as well as your front end.
Tomorrow, we&#8217;ll stop messing about with hard-coded data and learn how we can use Pyramid models and SQL persistence for a more robust web app.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Pyramid Views, Templates, and Front-end Testing</a><ul>
<li><a class="reference internal" href="#the-mvc-view">The MVC View</a></li>
<li><a class="reference internal" href="#presenting-data">Presenting Data</a><ul>
<li><a class="reference internal" href="#pyramid-renderers-and-view-config">Pyramid Renderers and <code class="docutils literal"><span class="pre">view_config</span></code></a></li>
<li><a class="reference internal" href="#jinja2-template-basics">Jinja2 Template Basics</a></li>
</ul>
</li>
<li><a class="reference internal" href="#templates-applied">Templates Applied</a><ul>
<li><a class="reference internal" href="#template-inheritance">Template Inheritance</a></li>
<li><a class="reference internal" href="#static-assets">Static Assets</a></li>
</ul>
</li>
<li><a class="reference internal" href="#testing-your-pyramid-app">Testing Your Pyramid App</a><ul>
<li><a class="reference internal" href="#setting-up-a-test-for-a-view">Setting Up a Test for a View</a></li>
<li><a class="reference internal" href="#running-pyramid-tests">Running Pyramid Tests</a></li>
<li><a class="reference internal" href="#enter-functional-tests">Enter Functional Tests</a></li>
<li><a class="reference internal" href="#the-beautifulsoup-interlude">The BeautifulSoup Interlude</a></li>
<li><a class="reference internal" href="#return-of-the-functional-test">Return of the Functional Test</a></li>
</ul>
</li>
<li><a class="reference internal" href="#recap">Recap</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="heap.html"
                        title="previous chapter">Heap</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../schedule/week03/wed.html"
                        title="next chapter">Wednesday</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../schedule/week03/wed.html" title="Wednesday"
             >next</a> |</li>
        <li class="right" >
          <a href="heap.html" title="Heap"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Python 401 2.1 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../schedule/week03/tue.html" >Tuesday</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2014, Cris Ewing.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.5.
    </div>
  </body>
</html>