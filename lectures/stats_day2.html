<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Statistics 2: Probability, Distributions, &amp; Tests &mdash; Python Dev Accelerator 2.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/pyramid.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Python Dev Accelerator 2.0 documentation" href="../index.html" />
    <link rel="up" title="Tuesday" href="../schedule/week06/tue.html" />
    <link rel="next" title="Django: Model Basics" href="django_models.html" />
    <link rel="prev" title="K-Means Experiment" href="kmeans.html" />
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head>
  <body role="document">
<div class="header">
  <div class="logo">
    <a href="../index.html">
      <img class="logo" src="../_static/cf_logo.png" alt="Logo"/>
      <p>Code Fellows</p>
    </a>
  </div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="django_models.html" title="Django: Model Basics"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="kmeans.html" title="K-Means Experiment"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Python Dev Accelerator 2.0 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../schedule/week06/tue.html" accesskey="U">Tuesday</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput > div,
div.nbinput div[class^=highlight],
div.nbinput div[class^=highlight] pre,
div.nboutput,
div.nboutput > div,
div.nboutput div[class^=highlight],
div.nboutput div[class^=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput > :first-child pre {
    color: navy;
}

/* output prompt */
div.nboutput > :first-child pre {
    color: darkred;
}

/* all prompts */
div.nbinput > :first-child[class^=highlight],
div.nboutput > :first-child[class^=highlight],
div.nboutput > :first-child {
    min-width: 11ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}

/* input/output area */
div.nbinput > :nth-child(2)[class^=highlight],
div.nboutput > :nth-child(2),
div.nboutput > :nth-child(2)[class^=highlight] {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
}

/* input area */
div.nbinput > :nth-child(2)[class^=highlight] {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput  > :nth-child(2).stderr {
    background: #fdd;
}

/* ANSI colors */
.ansiblack { color: black; }
.ansired { color: darkred; }
.ansigreen { color: darkgreen; }
.ansiyellow { color: #c4a000; }
.ansiblue { color: darkblue; }
.ansipurple { color: darkviolet; }
.ansicyan { color: steelblue; }
/* See https://github.com/jupyter/nbconvert/issues/174 */
.ansigray { color: gray; }  /* nbconvert CSS */
.ansigrey { color: gray; }  /* nbconvert HTML output */

.ansibgblack { background-color: black; }
.ansibgred { background-color: red; }
.ansibggreen { background-color: green; }
.ansibgyellow { background-color: yellow; }
.ansibgblue { background-color: blue; }
.ansibgpurple { background-color: magenta; }
.ansibgcyan { background-color: cyan; }
.ansibggray { background-color: gray; }

.ansibold { font-weight: bold; }
</style>
<div class="section" id="Statistics-2:-Probability,-Distributions,-&amp;-Tests">
<h1>Statistics 2: Probability, Distributions, &amp; Tests<a class="headerlink" href="#Statistics-2:-Probability,-Distributions,-&-Tests" title="Permalink to this headline">¶</a></h1>
<p><strong>Package/module refs:</strong></p>
<ul class="simple">
<li><a class="reference external" href="http://pandas.pydata.org/pandas-docs/version/0.17.0/generated/pandas.DataFrame.html">pandas</a>
for storing your data</li>
<li><a class="reference external" href="http://docs.scipy.org/doc/numpy-1.10.0/reference/arrays.html">numpy</a>
also for storing data (as arrays), and other awesome things</li>
<li><a class="reference external" href="https://docs.python.org/2/library/math.html">math.factorial</a> for
factorials</li>
<li><a class="reference external" href="http://docs.scipy.org/doc/scipy/reference/stats.html">scipy.stats</a>
for t-tests and distribution functions</li>
<li><a class="reference external" href="http://matplotlib.org/api/pyplot_api.html">matplotlib.pyplot</a> for
visualizing your data</li>
<li><a class="reference external" href="https://github.com/nhuntwalker/teaching/blob/master/plotting_in_python.ipynb">my tutorial on plotting
data</a>.
It&#8217;s focused on Astronomy but is universally (HA!) applicable</li>
</ul>
<div class="section" id="Handling-Null-Data">
<h2>Handling Null Data<a class="headerlink" href="#Handling-Null-Data" title="Permalink to this headline">¶</a></h2>
<p>No dataset is perfect. Most data that you work with, especially
human-compiled data, will be somewhat incomplete. Missing values. When
incomplete data is loaded with
<a class="reference external" href="http://pandas.pydata.org/pandas-docs/version/0.17.0/generated/pandas.read_csv.html">pandas.read_csv</a>,
<a class="reference external" href="http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.loadtxt.html">numpy.loadtxt</a>,
or
<a class="reference external" href="http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.genfromtxt.html">numpy.genfromtxt</a>,
those missing pieces will be filled by a default <code class="docutils literal"><span class="pre">NaN</span></code> (not a number)
value.</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
In [1]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">incomplete_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;../downloads/nmhw_sample_data.csv&quot;</span><span class="p">)</span>
<span class="n">incomplete_data</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
Out[1]:
</pre></div>
</div>
<div class="container">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Age</th>
      <th>Hometown</th>
      <th>Country</th>
      <th>Desired Income</th>
      <th>Favorite Food</th>
      <th>Number of Cats</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>James</td>
      <td>22</td>
      <td>New York</td>
      <td>NaN</td>
      <td>75000.0</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Bob</td>
      <td>25</td>
      <td>Seattle</td>
      <td>USA</td>
      <td>0.0</td>
      <td>pad thai</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Annette</td>
      <td>28</td>
      <td>San Francisco</td>
      <td>USA</td>
      <td>NaN</td>
      <td>spaghetti</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Florence</td>
      <td>23</td>
      <td>Beijing</td>
      <td>China</td>
      <td>60000.0</td>
      <td>xiaolong bao</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Martha</td>
      <td>30</td>
      <td>Kansas City</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>corn</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Desean</td>
      <td>27</td>
      <td>Newark</td>
      <td>USA</td>
      <td>85000.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Jamal</td>
      <td>28</td>
      <td>New York</td>
      <td>NaN</td>
      <td>65000.0</td>
      <td>pizza</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Kaede</td>
      <td>31</td>
      <td>Kyoto</td>
      <td>Japan</td>
      <td>65000.0</td>
      <td>sushi</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Milton</td>
      <td>23</td>
      <td>Austin</td>
      <td>NaN</td>
      <td>78000.0</td>
      <td>bbq</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Ivana</td>
      <td>29</td>
      <td>Moscow</td>
      <td>Russia</td>
      <td>NaN</td>
      <td>borscht</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Jorge</td>
      <td>35</td>
      <td>Rio de Janeiro</td>
      <td>Brasil</td>
      <td>90000.0</td>
      <td>farofa</td>
      <td>2.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Always keep in mind that a &#8220;NaN&#8221; value <strong>*only*</strong> signifies a non-entry.
Often, it&#8217;s tempting to just replace NaN values with zeros, or
<code class="docutils literal"><span class="pre">False</span></code>, but to universally assume that you can or even should do that
doesn&#8217;t do justice to what a NaN is. To be sure, NaN values <strong>*are
numerical*</strong> but neither represent any actual number nor evaluate as
False, None, or infinity.</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
In [2]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span class="n">this_val</span> <span class="o">=</span> <span class="n">incomplete_data</span><span class="o">.</span><span class="n">Country</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">this_val</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">this_val</span><span class="p">))</span>
<span class="k">print</span><span class="p">((</span><span class="n">this_val</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">this_val</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">this_val</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">this_val</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">))</span>
<span class="k">print</span><span class="p">((</span><span class="n">this_val</span> <span class="o">==</span> <span class="bp">False</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">this_val</span> <span class="o">==</span> <span class="bp">None</span><span class="p">))</span>
<span class="k">if</span> <span class="n">this_val</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;This still prints something because it still represents a thing.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<div class="highlight"><pre>
nan
&lt;class &apos;float&apos;&gt;
False
False
This still prints something because it still represents a thing.
</pre></div></div>
</div>
<p>There are many ways to handle NaN values and many entries (or
lackthereof) that should be recognized as such. Pandas allows you to
recognize a variety of values as null upon entry with the <code class="docutils literal"><span class="pre">na_values</span></code>
parameter of <code class="docutils literal"><span class="pre">pandas.read_csv</span></code></p>
<div class="nbinput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
In [3]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span class="n">incomplete_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;../downloads/nmhw_sample_data.csv&quot;</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;null&quot;</span><span class="p">,</span> <span class="s2">&quot;NULL&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">9999</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>Once assigned to a variable, NaN values can be dealt with on a
column-by-column basis or throughout the entire DataFrame with the
<code class="docutils literal"><span class="pre">fillna</span></code> method. A NaN might be set to some default value, as you may
be able to assume a meaningful value for a non-entry. You may also
decide that a different column&#8217;s NaN may need to be evaluated in order
to get it out of the way in filtering or some other data process later
on.</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
In [4]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span class="n">incomplete_data</span><span class="o">.</span><span class="n">Country</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="s2">&quot;USA&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
Out[4]:
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre>
0        USA
1        USA
2        USA
3      China
4        USA
5        USA
6        USA
7      Japan
8        USA
9     Russia
10    Brasil
Name: Country, dtype: object
</pre></div>
</div>
</div>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
In [5]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span class="k">print</span><span class="p">(</span><span class="n">incomplete_data</span><span class="p">[</span><span class="s2">&quot;Number of Cats&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="o">-</span><span class="mi">99</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<div class="highlight"><pre>
0      0.0
1      2.0
2      1.0
3      4.0
4      3.0
5    -99.0
6      3.0
7      4.0
8    -99.0
9      1.0
10     2.0
Name: Number of Cats, dtype: float64
</pre></div></div>
</div>
<p>If your data is ordered, you can use the &#8220;method&#8221; parameter to fill NaNs
with the last seen value with <code class="docutils literal"><span class="pre">method=ffill</span></code> or with the next valid
data point <code class="docutils literal"><span class="pre">method=bfill</span></code></p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
In [6]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span class="n">incomplete_data</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;ffill&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
Out[6]:
</pre></div>
</div>
<div class="container">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Age</th>
      <th>Hometown</th>
      <th>Country</th>
      <th>Desired Income</th>
      <th>Favorite Food</th>
      <th>Number of Cats</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>James</td>
      <td>22</td>
      <td>New York</td>
      <td>NaN</td>
      <td>75000.0</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Bob</td>
      <td>25</td>
      <td>Seattle</td>
      <td>USA</td>
      <td>0.0</td>
      <td>pad thai</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Annette</td>
      <td>28</td>
      <td>San Francisco</td>
      <td>USA</td>
      <td>0.0</td>
      <td>spaghetti</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Florence</td>
      <td>23</td>
      <td>Beijing</td>
      <td>China</td>
      <td>60000.0</td>
      <td>xiaolong bao</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Martha</td>
      <td>30</td>
      <td>Kansas City</td>
      <td>China</td>
      <td>60000.0</td>
      <td>corn</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Desean</td>
      <td>27</td>
      <td>Newark</td>
      <td>USA</td>
      <td>85000.0</td>
      <td>corn</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Jamal</td>
      <td>28</td>
      <td>New York</td>
      <td>USA</td>
      <td>65000.0</td>
      <td>pizza</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Kaede</td>
      <td>31</td>
      <td>Kyoto</td>
      <td>Japan</td>
      <td>65000.0</td>
      <td>sushi</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Milton</td>
      <td>23</td>
      <td>Austin</td>
      <td>Japan</td>
      <td>78000.0</td>
      <td>bbq</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Ivana</td>
      <td>29</td>
      <td>Moscow</td>
      <td>Russia</td>
      <td>78000.0</td>
      <td>borscht</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Jorge</td>
      <td>35</td>
      <td>Rio de Janeiro</td>
      <td>Brasil</td>
      <td>90000.0</td>
      <td>farofa</td>
      <td>2.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
In [7]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span class="n">incomplete_data</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;bfill&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
Out[7]:
</pre></div>
</div>
<div class="container">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Age</th>
      <th>Hometown</th>
      <th>Country</th>
      <th>Desired Income</th>
      <th>Favorite Food</th>
      <th>Number of Cats</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>James</td>
      <td>22</td>
      <td>New York</td>
      <td>USA</td>
      <td>75000.0</td>
      <td>pad thai</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Bob</td>
      <td>25</td>
      <td>Seattle</td>
      <td>USA</td>
      <td>0.0</td>
      <td>pad thai</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Annette</td>
      <td>28</td>
      <td>San Francisco</td>
      <td>USA</td>
      <td>60000.0</td>
      <td>spaghetti</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Florence</td>
      <td>23</td>
      <td>Beijing</td>
      <td>China</td>
      <td>60000.0</td>
      <td>xiaolong bao</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Martha</td>
      <td>30</td>
      <td>Kansas City</td>
      <td>USA</td>
      <td>85000.0</td>
      <td>corn</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Desean</td>
      <td>27</td>
      <td>Newark</td>
      <td>USA</td>
      <td>85000.0</td>
      <td>pizza</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Jamal</td>
      <td>28</td>
      <td>New York</td>
      <td>Japan</td>
      <td>65000.0</td>
      <td>pizza</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Kaede</td>
      <td>31</td>
      <td>Kyoto</td>
      <td>Japan</td>
      <td>65000.0</td>
      <td>sushi</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Milton</td>
      <td>23</td>
      <td>Austin</td>
      <td>Russia</td>
      <td>78000.0</td>
      <td>bbq</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Ivana</td>
      <td>29</td>
      <td>Moscow</td>
      <td>Russia</td>
      <td>90000.0</td>
      <td>borscht</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Jorge</td>
      <td>35</td>
      <td>Rio de Janeiro</td>
      <td>Brasil</td>
      <td>90000.0</td>
      <td>farofa</td>
      <td>2.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>You can choose to fill with the mean or median, however take note that
strings can&#8217;t be averaged or median-ed. So be aware of what columns
you&#8217;re fiddling with.</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
In [8]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span class="n">incomplete_data</span><span class="p">[</span><span class="s2">&quot;Age&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">incomplete_data</span><span class="o">.</span><span class="n">mean</span><span class="p">()[</span><span class="s2">&quot;Age&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
Out[8]:
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre>
0     22
1     25
2     28
3     23
4     30
5     27
6     28
7     31
8     23
9     29
10    35
Name: Age, dtype: int64
</pre></div>
</div>
</div>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
In [9]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span class="n">incomplete_data</span><span class="p">[</span><span class="s2">&quot;Desired Income&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">incomplete_data</span><span class="o">.</span><span class="n">median</span><span class="p">()[</span><span class="s2">&quot;Desired Income&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
Out[9]:
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre>
0     75000.0
1         0.0
2     70000.0
3     60000.0
4     70000.0
5     85000.0
6     65000.0
7     65000.0
8     78000.0
9     70000.0
10    90000.0
Name: Desired Income, dtype: float64
</pre></div>
</div>
</div>
<p>Other times it would make more sense to just leave NaNs as they are.
Aggregate operations like means and sums will just ignore them. Though
be aware that they will screw up iterative processes with strings.</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
In [10]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span class="k">print</span><span class="p">(</span><span class="n">incomplete_data</span><span class="p">[</span><span class="s2">&quot;Desired Income&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
<span class="n">incomplete_data</span><span class="p">[</span><span class="s2">&quot;Favorite Food&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<div class="highlight"><pre>
64750.0
</pre></div></div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<div class="highlight"><pre>
<span class="ansired">---------------------------------------------------------------------------</span>
<span class="ansired">AttributeError</span>                            Traceback (most recent call last)
<span class="ansigreen">&lt;ipython-input-10-89f3d5c32e54&gt;</span> in <span class="ansicyan">&lt;module&gt;</span><span class="ansiblue">()</span>
<span class="ansigreen">      1</span> print<span class="ansiblue">(</span>incomplete_data<span class="ansiblue">[</span><span class="ansiblue">&quot;Desired Income&quot;</span><span class="ansiblue">]</span><span class="ansiblue">.</span>mean<span class="ansiblue">(</span><span class="ansiblue">)</span><span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">----&gt; 2</span><span class="ansired"> </span>incomplete_data<span class="ansiblue">[</span><span class="ansiblue">&quot;Favorite Food&quot;</span><span class="ansiblue">]</span><span class="ansiblue">.</span>map<span class="ansiblue">(</span><span class="ansigreen">lambda</span> x<span class="ansiblue">:</span> x<span class="ansiblue">.</span>split<span class="ansiblue">(</span><span class="ansiblue">&quot; &quot;</span><span class="ansiblue">)</span><span class="ansiblue">)</span><span class="ansiblue"></span>

<span class="ansigreen">/Users/Nick/anaconda/envs/python-dev-accelerator/lib/python3.5/site-packages/pandas/core/series.py</span> in <span class="ansicyan">map</span><span class="ansiblue">(self, arg, na_action)</span>
<span class="ansigreen">   2119</span>                                      index=self.index).__finalize__(self)
<span class="ansigreen">   2120</span>         <span class="ansigreen">else</span><span class="ansiblue">:</span><span class="ansiblue"></span>
<span class="ansigreen">-&gt; 2121</span><span class="ansired">             </span>mapped <span class="ansiblue">=</span> map_f<span class="ansiblue">(</span>values<span class="ansiblue">,</span> arg<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">   2122</span>             return self._constructor(mapped,
<span class="ansigreen">   2123</span>                                      index=self.index).__finalize__(self)

<span class="ansigreen">pandas/src/inference.pyx</span> in <span class="ansicyan">pandas.lib.map_infer (pandas/lib.c:63043)</span><span class="ansiblue">()</span>

<span class="ansigreen">&lt;ipython-input-10-89f3d5c32e54&gt;</span> in <span class="ansicyan">&lt;lambda&gt;</span><span class="ansiblue">(x)</span>
<span class="ansigreen">      1</span> print<span class="ansiblue">(</span>incomplete_data<span class="ansiblue">[</span><span class="ansiblue">&quot;Desired Income&quot;</span><span class="ansiblue">]</span><span class="ansiblue">.</span>mean<span class="ansiblue">(</span><span class="ansiblue">)</span><span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">----&gt; 2</span><span class="ansired"> </span>incomplete_data<span class="ansiblue">[</span><span class="ansiblue">&quot;Favorite Food&quot;</span><span class="ansiblue">]</span><span class="ansiblue">.</span>map<span class="ansiblue">(</span><span class="ansigreen">lambda</span> x<span class="ansiblue">:</span> x<span class="ansiblue">.</span>split<span class="ansiblue">(</span><span class="ansiblue">&quot; &quot;</span><span class="ansiblue">)</span><span class="ansiblue">)</span><span class="ansiblue"></span>

<span class="ansired">AttributeError</span>: &apos;float&apos; object has no attribute &apos;split&apos;
</pre></div></div>
</div>
<p>It&#8217;s worth noting that while NaN values essentially mean the same no
matter what, not all NaNs are created equal. A pandas nan is not the
same as a numpy nan (although oddly-enough will be recognized as a
nan-like value), and vice versa.</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
In [11]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span class="k">print</span><span class="p">(</span><span class="n">this_val</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">this_val</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<div class="highlight"><pre>
False
True
True
&lt;class &apos;float&apos;&gt;
</pre></div></div>
</div>
<p>At the end of the day, no matter what you decide to do with NaNs make
sure that you know your data and have an idea of what you want to do
with it. All choices will follow from the nature of your data set and
what your analysis entails.</p>
</div>
<div class="section" id="Basic-Rules-of-Probability">
<h2>Basic Rules of Probability<a class="headerlink" href="#Basic-Rules-of-Probability" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The chance that some event happens given all events that could happen
in that category.</li>
<li>Probabilities denote <strong>the chance</strong> that something happens, <strong>not the
guarantee</strong></li>
<li><span class="math">\(0 \le p(x) \le 1\)</span> or <span class="math">\(0\% \le p(x) \le 100\%\)</span></li>
<li>For any set of associated but separate events,
<span class="math">\(\displaystyle\sum_i p(x_i) = 1\)</span></li>
<li>For related events A and B, the probablity that they happen together
is</li>
</ul>
<p><span class="math">\(p(A \cap B) = p(A) \cdot p(B)\)</span></p>
<ul class="simple">
<li>The probability that either one of them happens is</li>
</ul>
<p><span class="math">\(p(A \cup B) = p(A) + p(B) - p(A \cap B)\)</span></p>
</div>
<div class="section" id="Examples:">
<h2>Examples:<a class="headerlink" href="#Examples:" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>p(coin toss = Head)</li>
<li>p(rolling D20 and getting ≤ 11)</li>
<li>p(5 coin tosses = Head)</li>
<li>For bag of 4 white balls and 6 black balls, p(drawing 2 white then 2
black)</li>
</ul>
</div>
<div class="section" id="Probability-Distributions">
<h2>Probability Distributions<a class="headerlink" href="#Probability-Distributions" title="Permalink to this headline">¶</a></h2>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
In [12]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="o">%</span><span class="k">matplotlib</span> inline

<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;../downloads/prosperLoanData_truncated.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">StatedMonthlyIncome</span> <span class="o">&lt;</span> <span class="mf">2E4</span><span class="p">]</span>
<span class="n">H</span><span class="p">,</span> <span class="n">edges</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">StatedMonthlyIncome</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">edges</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">H</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">H</span><span class="p">)),</span> <span class="n">width</span><span class="o">=</span><span class="n">edges</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">edges</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%g</span><span class="s2"> loans&quot;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">),</span>
        <span class="n">horizontalalignment</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Stated Monthly Income ($)&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Probability of Income Range&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">minorticks_on</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<img alt="../_images/lectures_stats_day2_24_0.png" src="../_images/lectures_stats_day2_24_0.png" />
</div>
</div>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
In [13]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span class="n">H</span><span class="p">,</span> <span class="n">edges</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">StatedMonthlyIncome</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">edges</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">H</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">H</span><span class="p">)),</span> <span class="n">width</span><span class="o">=</span><span class="n">edges</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">edges</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%g</span><span class="s2"> loans&quot;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">),</span>
        <span class="n">horizontalalignment</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Stated Monthly Income ($)&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Probability of Income Range&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">minorticks_on</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<img alt="../_images/lectures_stats_day2_25_0.png" src="../_images/lectures_stats_day2_25_0.png" />
</div>
</div>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
In [14]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span class="n">H</span><span class="p">,</span> <span class="n">edges</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">StatedMonthlyIncome</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">edges</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">H</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">H</span><span class="p">)),</span> <span class="n">width</span><span class="o">=</span><span class="n">edges</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">edges</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%g</span><span class="s2"> loans&quot;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">),</span>
        <span class="n">horizontalalignment</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Stated Monthly Income ($)&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Probability of Income Range&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">minorticks_on</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<img alt="../_images/lectures_stats_day2_26_0.png" src="../_images/lectures_stats_day2_26_0.png" />
</div>
</div>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
In [15]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span class="n">H</span><span class="p">,</span> <span class="n">edges</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">StatedMonthlyIncome</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">edges</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">H</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">H</span><span class="p">)),</span> <span class="n">width</span><span class="o">=</span><span class="n">edges</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">edges</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%g</span><span class="s2"> loans&quot;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">),</span>
        <span class="n">horizontalalignment</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Stated Monthly Income($)&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Probability of Income Range&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">minorticks_on</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<img alt="../_images/lectures_stats_day2_27_0.png" src="../_images/lectures_stats_day2_27_0.png" />
</div>
</div>
<p>Note that here I use <code class="docutils literal"><span class="pre">ax</span></code> to access the plot space of the figure, so
that I can place text wherever I want it. If I don&#8217;t use the
<code class="docutils literal"><span class="pre">transform</span></code> parameter, then if I want to place text on a figure I have
to specify the exact coordinates in the data space for where I want it
to be. With transforming to the coordinate space of the figure, I can
use the fact that coordinate space goes from 0 to 1 horizontally and
vertically to place text easily.</p>
<p>One issue is that if you use <code class="docutils literal"><span class="pre">ax</span></code>, you set axis labels using
<code class="docutils literal"><span class="pre">ax.set_xlabel</span></code> and <code class="docutils literal"><span class="pre">ax.set_ylabel</span></code> instead of the normal methods
with <code class="docutils literal"><span class="pre">plt.xlabel</span></code> and <code class="docutils literal"><span class="pre">plt.ylabel</span></code>. Similar for setting axis limits.</p>
<p>Also note that with numpy arrays (and pandas DataFrames), you can
perform arithmetic on the entire object at once. Also note that with
numpy arrays specifically, you cannot alter the size of the array once
it&#8217;s been created. Fixed-size arrays make it faster, but the
immutability of size can be a little difficult. At least you can alter
the values inside the array easily through indexing.</p>
</div>
<div class="section" id="Cumulative-Probability-Distribution">
<h2>Cumulative Probability Distribution<a class="headerlink" href="#Cumulative-Probability-Distribution" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The probability of getting a value less than x</li>
</ul>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
In [16]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span class="n">H</span><span class="p">,</span> <span class="n">edges</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">StatedMonthlyIncome</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">2E4</span><span class="p">,</span> <span class="mi">81</span><span class="p">))</span>
<span class="n">incomes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">,</span> <span class="mi">15000</span><span class="p">]</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># smooshes vertical subplots together</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">211</span><span class="p">)</span> <span class="c1"># 2 rows, 1 column, put this figure in the first cell</span>
<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">edges</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">H</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">H</span><span class="p">)),</span> <span class="n">width</span><span class="o">=</span><span class="n">edges</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">edges</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">incomes</span><span class="p">:</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">ii</span><span class="p">,</span> <span class="n">ii</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.06</span><span class="p">],</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Probability of Income Range&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([])</span> <span class="c1"># kills the numbers on the x-axis for this plot</span>
<span class="n">ax</span><span class="o">.</span><span class="n">minorticks_on</span><span class="p">()</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">212</span><span class="p">)</span> <span class="c1"># 2 rows, 1 column, put this figure in the first cell</span>
<span class="n">probabilities</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">H</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">edges</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">probabilities</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">incomes</span><span class="p">:</span>
    <span class="n">prob</span> <span class="o">=</span> <span class="n">probabilities</span><span class="p">[</span><span class="n">edges</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">ii</span><span class="p">]</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">ii</span><span class="p">,</span> <span class="n">ii</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">prob</span><span class="p">],</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">ii</span><span class="p">],</span> <span class="p">[</span><span class="n">prob</span><span class="p">,</span> <span class="n">prob</span><span class="p">],</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">ii</span> <span class="o">+</span> <span class="mf">2.5E2</span><span class="p">,</span> <span class="n">prob</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s2">&quot;p(x): </span><span class="si">%.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">prob</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Stated Monthly Income ($)&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Cumulative Probability&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.99</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">minorticks_on</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;../downloads/cumulative_distribution.png&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<img alt="../_images/lectures_stats_day2_30_0.png" src="../_images/lectures_stats_day2_30_0.png" />
</div>
</div>
<p>Numpy arrays have several methods, one of which is <code class="docutils literal"><span class="pre">cumsum()</span></code>. This
method performs a cumulative sum on your array from left to right.</p>
<div class="highlight-python"><div class="highlight"><pre>arr = np.array([1, 1, 1, 1, 1, 1, 1, 1])
arr.cumsum()
&gt;&gt;&gt; array([1, 2, 3, 4, 5, 6, 7, 8])
</pre></div>
</div>
<ul class="simple">
<li>&#8220;If I choose a person from this data set at random, there&#8217;s a 58%
chance that their monthly salary is less than $5,000&#8221;</li>
<li>&#8221;..., there&#8217;s a 35% chance their monthly salary is between $5,000 and
$10,000&#8221;</li>
<li>&#8221;..., there&#8217;s a 1% chance their monthly salary is greater than
$15,000&#8221;</li>
</ul>
</div>
<div class="section" id="The-Gaussian/Normal-Distribution">
<h2>The Gaussian/Normal Distribution<a class="headerlink" href="#The-Gaussian/Normal-Distribution" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Theoretical curve describing the probability of getting some value x,
given the mean and standard deviation of the data</li>
<li><span class="math">\(p(x|\sigma, \mu) = \displaystyle\frac{1}{\sqrt{2\pi\sigma^2}}\exp{\left[\frac{-(x - \mu)^2}{2\sigma^2}\right]}\)</span></li>
<li>The most commonly-used distribution</li>
<li>Ref: <strong>Central Limit Theorem</strong></li>
<li>The Gist: The mean of samples drawn from an almost arbitrary
distribution will approx. follow a Gaussian</li>
<li>Applied to everything, even when not appropriate</li>
</ul>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
In [17]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span class="k">del</span> <span class="n">data</span>

<span class="k">def</span> <span class="nf">gaussian</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">std</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">std</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="n">mu</span><span class="p">)</span> <span class="o">/</span> <span class="n">std</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">gaussian</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;$\mu = 0, \sigma = 0.5$&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">gaussian</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;$\mu = 0, \sigma = 1$&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">gaussian</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;$\mu = 0, \sigma = 2$&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;$x$&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;$p(x)$&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;../downloads/gaussian_distribution.png&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<img alt="../_images/lectures_stats_day2_35_0.png" src="../_images/lectures_stats_day2_35_0.png" />
</div>
</div>
</div>
<div class="section" id="The-Binomial-Distribution">
<h2>The Binomial Distribution<a class="headerlink" href="#The-Binomial-Distribution" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li>Describes the distribution of a variable that can only take two</li>
</ul>
</div></blockquote>
<p>values (0/1, False/True, Heads/Tails) - For <em>N</em> trials... - I know the
probability <em>b</em> of getting one outcome per trial... - I can describe the
probability of getting <em>k</em> successes of that outcome:</p>
<div class="math">
\[p(k|b,N) = \displaystyle\frac{N!}{k!(N-k)!}b^k(1 - b)^{N-k}\]</div>
<ul class="simple">
<li>The mean <span class="math">\(\bar{k} = b\,N\)</span></li>
<li>The standard deviation <span class="math">\(\sigma_k = \sqrt{N \,b \,(1 - b)}\)</span></li>
<li><strong>NOTE: does not describe probability of getting consecutive
successes or any particular combination of successes &amp; failures</strong></li>
</ul>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
In [18]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">factorial</span>


<span class="k">def</span> <span class="nf">binomial</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">N</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">factorial</span><span class="p">(</span><span class="n">N</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="n">factorial</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">*</span> <span class="n">factorial</span><span class="p">(</span><span class="n">N</span> <span class="o">-</span> <span class="n">k</span><span class="p">))</span> <span class="o">*</span> <span class="n">b</span> <span class="o">**</span> <span class="n">k</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">b</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="n">N</span> <span class="o">-</span> <span class="n">k</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">y0</span> <span class="o">=</span> <span class="p">[</span><span class="n">binomial</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>
<span class="n">y1</span> <span class="o">=</span> <span class="p">[</span><span class="n">binomial</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">)]</span>
<span class="n">y2</span> <span class="o">=</span> <span class="p">[</span><span class="n">binomial</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;$b = 0.5, N = 100$&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="n">y1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;$b = 0.5, N = 50$&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;$b = 0.6, N = 100$&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;$k$&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;$p(k | b, N)$&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;../downloads/binomial_distribution.png&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<img alt="../_images/lectures_stats_day2_37_0.png" src="../_images/lectures_stats_day2_37_0.png" />
</div>
</div>
</div>
<div class="section" id="Hypothesis-Testing-and-Measurement-Significance">
<h2>Hypothesis Testing and Measurement Significance<a class="headerlink" href="#Hypothesis-Testing-and-Measurement-Significance" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Chance occurrence vs meaningful occurrence</li>
<li>Sticking with the Gaussian distribution of random samples</li>
<li>Either reject the Null Hypothesis <span class="math">\(H_0\)</span> or fail to reject it.</li>
<li><strong>Can never PROVE absolutely True or absolutely False</strong></li>
<li>Hypothesis conclusions entirely dependent on the sample. Cannot be
assumed to be universal.</li>
<li>Significance levels (<span class="math">\(\alpha\)</span>) help decide whether to reject
<span class="math">\(H_0\)</span><ul>
<li>Typical <span class="math">\(\alpha\)</span>-levels: 0.05, 0.025, 0.01</li>
</ul>
</li>
<li>Statistical tests produce two things:<ul>
<li>a numerical statistic showing the distance between the means of
two distributions (more later)</li>
<li>a &#8220;p-value&#8221; showing the probability of getting this result <strong>given
the null hypothesis</strong></li>
</ul>
</li>
<li>If your p-value is less than some alpha-level, then it&#8217;s
statistically significant to that level<ul>
<li>ex: p = 0.035; my test rejects the null hypothesis at
<span class="math">\(\alpha = 0.05\)</span> significance level, but not at the
<span class="math">\(\alpha = 0.025\)</span> level.</li>
<li>ex: p = 0.13; my tests fails to reject the null hypothesis</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="Students'-t-Test">
<h2>Students&#8217; t-Test<a class="headerlink" href="#Students'-t-Test" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">&#8220;Students&#8221; was the pseudonym of the originator</p>
</li>
<li><p class="first">Computes a statistic (the &#8220;t&#8221; statistic) based on the means and
variances of samples</p>
<div class="math">
\[t = \displaystyle\frac{\bar{x_1} - \bar{x_2}}{\sqrt{\frac{s_1^2}{n_1} + \frac{s_2^2}{n_2}}}\]</div>
</li>
<li><p class="first"><strong>Defs:</strong></p>
<ul class="simple">
<li><span class="math">\(s_i\)</span>: standard deviation of sample <span class="math">\(i\)</span></li>
<li><span class="math">\(n_i\)</span>: number of items in sample <span class="math">\(i\)</span></li>
</ul>
</li>
<li><p class="first"><strong>Use Cases</strong></p>
<ul class="simple">
<li>test whether a subsample is significantly different from the
population</li>
<li>test if two subsamples from the same population are significantly
different</li>
<li>test if two independent samples are significantly different</li>
</ul>
</li>
<li><p class="first"><strong>Note: Data should be somewhat &#8220;normally&#8221; distributed (so
visualize). Non-normal data needs a different test (next time</strong></p>
</li>
</ul>
</div>
<div class="section" id="t-Test-example:-Seattle-Weather-in-2010">
<h2>t-Test example: Seattle Weather in 2010<a class="headerlink" href="#t-Test-example:-Seattle-Weather-in-2010" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Hypothesis:</strong> The temperature during the Spring was significantly
different than the temperature during the Fall</li>
<li><strong>Null hypothesis:</strong> The temperature during the Spring wasn&#8217;t
significantly different</li>
<li><strong>Define terms:</strong><ul>
<li>Spring: March through May</li>
<li>Fall: September through November</li>
</ul>
</li>
</ul>
<div class="nbinput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
In [19]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">data_dir</span> <span class="o">=</span> <span class="s2">&quot;../downloads/seattle_weather/&quot;</span>
<span class="n">weather_files</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">data_dir</span> <span class="o">+</span> <span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">data_dir</span><span class="p">)</span> <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;MonthlyHistory&quot;</span><span class="p">)]</span>
<span class="n">seattle_weather</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">weather_files</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">weather_files</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
    <span class="n">indata</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="k">if</span> <span class="s2">&quot;PDT&quot;</span> <span class="ow">in</span> <span class="n">indata</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">indata</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;PDT&#39;</span><span class="p">:</span> <span class="s1">&#39;PST&#39;</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="n">seattle_weather</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">((</span><span class="n">seattle_weather</span><span class="p">,</span> <span class="n">indata</span><span class="p">),</span> <span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><code class="docutils literal"><span class="pre">pandas.concat</span></code> takes two DataFrames and merges them into one
DataFrame. If you don&#8217;t set <code class="docutils literal"><span class="pre">ignore_index=True</span></code> then it will preserve
the index values that each individual DataFrame had before merging,
which can become problematic when slicing the new merged frame</p>
<p>Note that when concatenating DataFrames, any columns that exist in one
and not in the other will get filled with null values. Above, I just
change the name of the &#8220;PDT&#8221; column because not every data file has that
column despite them all showing roughly the same data.</p>
<div class="nbinput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
In [20]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span class="n">seattle_weather</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">seattle_weather</span><span class="o">.</span><span class="n">PST</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>
<span class="n">seattle_weather</span><span class="p">[</span><span class="s2">&quot;month&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">seattle_weather</span><span class="o">.</span><span class="n">PST</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]))</span>
<span class="n">seattle_weather</span><span class="p">[</span><span class="s2">&quot;day&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">seattle_weather</span><span class="o">.</span><span class="n">PST</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<p>You can create new columns in a DataFrame much like how you can create
new keys in a dictionary, by specifying the column name that you want.
You can also get data from columns in two ways: calling that column up
with the square bracket notation <code class="docutils literal"><span class="pre">DataFrame[&quot;column_name&quot;]</span></code> or with
dot notation <code class="docutils literal"><span class="pre">DataFrame.column_name</span></code>. The main difference is that dot
notation cannot handle column names with spaces.</p>
<div class="nbinput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
In [21]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span class="n">spring_2010</span> <span class="o">=</span> <span class="p">(</span><span class="n">seattle_weather</span><span class="o">.</span><span class="n">year</span> <span class="o">==</span> <span class="mi">2010</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">seattle_weather</span><span class="o">.</span><span class="n">month</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">seattle_weather</span><span class="o">.</span><span class="n">month</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">)</span>
<span class="n">fall_2010</span> <span class="o">=</span> <span class="p">(</span><span class="n">seattle_weather</span><span class="o">.</span><span class="n">year</span> <span class="o">==</span> <span class="mi">2010</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">seattle_weather</span><span class="o">.</span><span class="n">month</span> <span class="o">&gt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">seattle_weather</span><span class="o">.</span><span class="n">month</span> <span class="o">&lt;</span> <span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>You can select indices of data matching specific criteria. The above
lines produce two pandas Series objects (effectively a one-column
DataFrame) holding boolean values of <code class="docutils literal"><span class="pre">True</span></code> when a row matches your
criteria, and <code class="docutils literal"><span class="pre">False</span></code> when it doesn&#8217;t. You can do the same with numpy
arrays (where the same selection will produce numpy arrays filled with
booleans)</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
In [22]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">opacity</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">mean_temp</span> <span class="o">=</span> <span class="s2">&quot;Mean TemperatureF&quot;</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">seattle_weather</span><span class="p">[</span><span class="n">spring_2010</span><span class="p">][</span><span class="n">mean_temp</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">76</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">alpha</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Spring 2010&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">seattle_weather</span><span class="p">[</span><span class="n">fall_2010</span><span class="p">][</span><span class="n">mean_temp</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">76</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">alpha</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Fall 2010&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Mean Temperature (F)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;N days&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<img alt="../_images/lectures_stats_day2_47_0.png" src="../_images/lectures_stats_day2_47_0.png" />
</div>
</div>
<p>The <code class="docutils literal"><span class="pre">alpha</span></code> parameter controls the opacity of whatever you&#8217;re
plotting, whether they are bars, points, lines, circles, whatever.
Opacity goes from 0 to 1. Works best when you you have heavily
overlapping data. In the event of overlapping data, plot the larger data
set first (in the background) so that it doesn&#8217;t drown out the smaller
set.</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
In [23]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">ttest_ind</span>

<span class="n">t_stat</span><span class="p">,</span> <span class="n">p_value</span> <span class="o">=</span> <span class="n">ttest_ind</span><span class="p">(</span><span class="n">seattle_weather</span><span class="p">[</span><span class="n">spring_2010</span><span class="p">][</span><span class="n">mean_temp</span><span class="p">],</span>
                            <span class="n">seattle_weather</span><span class="p">[</span><span class="n">fall_2010</span><span class="p">][</span><span class="n">mean_temp</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Results:</span><span class="se">\n\t</span><span class="s2">t-statistic: </span><span class="si">%.5f</span><span class="se">\n\t</span><span class="s2">p-value: </span><span class="si">%.5f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t_stat</span><span class="p">,</span> <span class="n">p_value</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<div class="highlight"><pre>
Results:
        t-statistic: -2.09063
        p-value: 0.03796
</pre></div></div>
</div>
<p>I can reject the null hypothesis at the p &lt; 0.05 significance level.
<strong>At that level, the mean temperature in Spring and Fall 2010 was
significantly different.</strong></p>
<div class="section" id="t-tests-in-SciPy.stats">
<h3>t-tests in SciPy.stats<a class="headerlink" href="#t-tests-in-SciPy.stats" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>`ttest_ind &lt;http://docs.scipy.org/doc/scipy-0.16.0/reference/generated/scipy.stats.ttest_ind.html#scipy.stats.ttest_ind&gt;`__:</strong>
performs a t-test on two sample distributions and returns the
t-statistic (useful later) and the p-value; useful for two
independent samples from the same population (or very similar but
different populations)</li>
<li><strong>`ttest_1samp &lt;http://docs.scipy.org/doc/scipy-0.16.0/reference/generated/scipy.stats.ttest_1samp.html#scipy.stats.ttest_1samp&gt;`__:</strong>
useful for one sample distribution in comparison to the mean of a
population</li>
<li><strong>`ttest_rel &lt;http://docs.scipy.org/doc/scipy-0.16.0/reference/generated/scipy.stats.ttest_rel.html#scipy.stats.ttest_rel&gt;`__:</strong>
useful for two related samples</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Statistics 2: Probability, Distributions, &amp; Tests</a><ul>
<li><a class="reference internal" href="#Handling-Null-Data">Handling Null Data</a></li>
<li><a class="reference internal" href="#Basic-Rules-of-Probability">Basic Rules of Probability</a></li>
<li><a class="reference internal" href="#Examples:">Examples:</a></li>
<li><a class="reference internal" href="#Probability-Distributions">Probability Distributions</a></li>
<li><a class="reference internal" href="#Cumulative-Probability-Distribution">Cumulative Probability Distribution</a></li>
<li><a class="reference internal" href="#The-Gaussian/Normal-Distribution">The Gaussian/Normal Distribution</a></li>
<li><a class="reference internal" href="#The-Binomial-Distribution">The Binomial Distribution</a></li>
<li><a class="reference internal" href="#Hypothesis-Testing-and-Measurement-Significance">Hypothesis Testing and Measurement Significance</a></li>
<li><a class="reference internal" href="#Students'-t-Test">Students&#8217; t-Test</a></li>
<li><a class="reference internal" href="#t-Test-example:-Seattle-Weather-in-2010">t-Test example: Seattle Weather in 2010</a><ul>
<li><a class="reference internal" href="#t-tests-in-SciPy.stats">t-tests in SciPy.stats</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="kmeans.html"
                        title="previous chapter">K-Means Experiment</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="django_models.html"
                        title="next chapter">Django: Model Basics</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="django_models.html" title="Django: Model Basics"
             >next</a> |</li>
        <li class="right" >
          <a href="kmeans.html" title="K-Means Experiment"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Python Dev Accelerator 2.0 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../schedule/week06/tue.html" >Tuesday</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2014, Cris Ewing.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.5.
    </div>
  </body>
</html>